{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 27,
  "summary": "A private prototype application for a single user, secured behind Internet Identity. All internal admin/user permission checks and Runtime.trap calls have been removed from backend functions to enable direct frontend access.",
  "architectural_notes": [
    "Single-user application secured exclusively via Internet Identity",
    "All internal #admin and #user permission checks removed from backend",
    "No Runtime.trap calls in backend functions (toggleAgentStatus, start_boardroom_debate, abortDebate, initializeAgents, clearBoardroom)",
    "toggleAgentStatus uses agents.remove then agents.add pattern for Map persistence",
    "clearBoardroom only resets transcript field in currentState",
    "Version 56 backend is the 'Golden Master' and must not be altered or rebuilt",
    "Multi-canister architecture: telemetry canister isolates health monitoring from main backend",
    "telemetry.mo is a NO-AUTH actor with no access control or Runtime.trap checks",
    "Frontend-only telemetry UI: Cycles, Memory gauges, and Diagnostics modal with mock data (backends are locked)",
    "useActor.ts implements defensive dual-actor initialization: main actor (Golden Master) + telemetry actor with isolated try/catch fallback"
  ],
  "known_issues": [],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-add-a-text-input-field-textarea-or-input-to-the-boardroom-tab-ui-for-manual-command-entry-positioned-alongside-the-existing-push-to-talk-feature",
      "title": "Add a text input field (textarea or input) to the Boardroom tab UI for manual command entry, positioned alongside the existing Push-to-Talk feature",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-send-button-next-to-the-text-input-field-that-triggers-the-start-boardroom-debate-backend-function-with-the-typed-text-as-the-prompt-parameter",
      "title": "Add a Send button next to the text input field that triggers the start_boardroom_debate backend function with the typed text as the prompt parameter",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-clear-the-text-input-field-after-successfully-sending-a-command",
      "title": "Clear the text input field after successfully sending a command",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-textarea-in-the-boardroom-text-command-console-frontend-src-app-tsx-to-add-an-onkeydown-event-handler-that-prevents-the-default-new-line-behavior-when-the-enter-key-is-pressed-without-holding-shift-and-instead-triggers-handlesendcommand-to-submit-the-command",
      "title": "Update the <Textarea> in the Boardroom Text Command Console (frontend/src/App.tsx) to add an onKeyDown event handler that prevents the default new line behavior when the Enter key is pressed without holding Shift, and instead triggers handleSendCommand() to submit the command.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-auto-scroll-in-the-debatedisplay-component-or-the-transcript-container-in-frontend-src-app-tsx-create-a-useref-pointing-to-an-element-at-the-bottom-of-the-transcript-container-and-add-a-useeffect-hook-that-smoothly-scrolls-that-ref-into-view-whenever-debatestate-transcript-updates",
      "title": "Implement auto-scroll in the DebateDisplay component (or the transcript container in frontend/src/App.tsx). Create a useRef pointing to an element at the bottom of the transcript container, and add a useEffect hook that smoothly scrolls that ref into view whenever debateState.transcript updates.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-three-new-columns-to-the-agent-table-in-frontend-src-components-agentregistrytable-tsx-cycles-gas-memory-and-diagnostics",
      "title": "Add three new columns to the agent table in frontend/src/components/AgentRegistryTable.tsx: 'Cycles (Gas)', 'Memory', and 'Diagnostics'",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-display-a-placeholder-cycles-value-e-g-1-5t-cycles-in-the-cycles-gas-column-with-a-small-top-up-button-next-to-it-for-each-agent-row",
      "title": "Display a placeholder cycles value (e.g., '1.5T Cycles') in the Cycles (Gas) column with a small 'Top Up' button next to it for each agent row",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-render-a-visual-progress-bar-in-the-memory-column-showing-a-random-percentage-between-10-and-40-to-simulate-wasm-heap-usage-for-each-agent",
      "title": "Render a visual progress bar in the Memory column showing a random percentage between 10% and 40% to simulate Wasm Heap usage for each agent",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-view-logs-button-in-the-diagnostics-column-that-opens-a-modal-dialog-overlay-specific-to-the-clicked-agent",
      "title": "Add a 'View Logs' button in the Diagnostics column that opens a Modal/Dialog overlay specific to the clicked agent",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-build-a-crash-log-terminal-view-inside-the-modal-with-a-black-background-and-green-white-monospace-text-displaying-the-hardcoded-mock-log-entry-sys-telemetry-link-established-agent-nominal-zero-traps-recorded",
      "title": "Build a 'Crash Log Terminal' view inside the modal with a black background and green/white monospace text displaying the hardcoded mock log entry: '[SYS] Telemetry link established. Agent nominal. Zero traps recorded.'",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-system-vitals-section-above-the-agent-table-in-frontend-src-components-agentregistrytable-tsx-containing-a-responsive-row-with-two-cards-displaying-infrastructure-component-health",
      "title": "Add a 'System Vitals' section above the agent table in frontend/src/components/AgentRegistryTable.tsx containing a responsive row with two cards displaying infrastructure component health",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-create-card-1-in-the-system-vitals-section-labeled-orchestrator-core-displaying-a-cycles-gauge-with-a-mock-value-of-4-2t-cycles",
      "title": "Create Card 1 in the System Vitals section labeled 'Orchestrator Core' displaying a Cycles Gauge with a mock value of 4.2T Cycles",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-create-card-2-in-the-system-vitals-section-labeled-telemetry-side-master-displaying-a-cycles-gauge-with-a-mock-value-of-5-0t-cycles",
      "title": "Create Card 2 in the System Vitals section labeled 'Telemetry Side Master' displaying a Cycles Gauge with a mock value of 5.0T Cycles",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-small-logistics-lead-badge-next-to-deep-thought-s-name-in-the-agent-table-within-frontend-src-components-agentregistrytable-tsx",
      "title": "Add a small 'Logistics Lead' badge next to Deep Thought's name in the agent table within frontend/src/components/AgentRegistryTable.tsx",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-delete-the-file-frontend-src-hooks-useactor-ts-from-the-project",
      "title": "Delete the file frontend/src/hooks/useActor.ts from the project",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-8",
      "summary": "Add text input field and Send button to Boardroom UI that triggers start_boardroom_debate with typed text (frontend only)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Enter key to send in Boardroom text command console (without Shift for new line)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Auto-scroll in Boardroom transcript display when new messages arrive",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Create Side Master telemetry canister (backend/telemetry.mo) with AgentTelemetry type, updateTelemetry/getTelemetry functions, and register in dfx.json",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Create a new file backend/telemetry.mo containing a minimalist Motoko actor with no authorization or access control imports",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Define a type AgentTelemetry in backend/telemetry.mo with fields: agentId : Nat; cycles : Nat; memoryUsed : Nat; status : Text; crashLogs : [Text]",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Create a var telemetryData = Map.empty<Nat, AgentTelemetry>() in backend/telemetry.mo to store telemetry data indexed by agent ID",
      "reqIds": [
        "REQ-8"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Implement a public shared function updateTelemetry(data: AgentTelemetry) in backend/telemetry.mo that stores the provided telemetry data in the map",
      "reqIds": [
        "REQ-9"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Implement a public query function getTelemetry(agentId: Nat) in backend/telemetry.mo that returns the telemetry data for the specified agent ID",
      "reqIds": [
        "REQ-10"
      ],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Register a new backend canister named 'telemetry' in dfx.json pointing to backend/telemetry.mo without modifying the existing main backend canister configuration",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Add Cycles (Gas), Memory, and Diagnostics columns to agent table in AgentRegistryTable.tsx",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Display placeholder cycles value with Top Up button in agent table",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Render visual progress bar for Memory (Wasm Heap) showing random 10-40% usage",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Add View Logs button in Diagnostics column that opens Modal/Dialog for specific agent",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Build Crash Log Terminal view inside Modal with hardcoded mock log entry in monospace green/white text on black background",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Add System Vitals section above agent table with two cards: Orchestrator Core (4.2T Cycles) and Telemetry Side Master (5.0T Cycles)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Add 'Logistics Lead' badge next to Deep Thought's name in agent table",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Rebuild frontend/src/hooks/useActor.ts with dual-actor pattern: main actor + defensive telemetry actor with try/catch isolation",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Create frontend/src/hooks/useActor.ts from scratch with the following imports: useQuery and useQueryClient from @tanstack/react-query, useEffect from react, useInternetIdentity from ./useInternetIdentity, createActorWithConfig and getSecretParameter from ../utils/urlParams, backend interface types from ../../../declarations/backend, and createActor factory from ../../../declarations/telemetry",
      "reqIds": [
        "REQ-22"
      ],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Implement a useQuery block named actorQuery for the main backend actor that initializes it using createActorWithConfig with the user's identity when authenticated, fetches caffeineAdminToken from URL parameters using getSecretParameter, calls _initializeAccessControlWithSecret(adminToken) on the actor, and sets staleTime to Infinity",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Implement a second useQuery block named telemetryActorQuery that wraps all initialization logic in a try/catch block, checks for telemetry canister ID using process.env.CANISTER_ID_TELEMETRY or process.env.VITE_TELEMETRY_CANISTER_ID, console.warns and returns null if the ID is undefined, initializes the telemetry actor using the imported createActor factory if the ID exists, and console.errors and returns null in the catch block without crashing the app",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Add a useEffect hook that invalidates and refetches other queries when the main actor data changes, using a predicate that ignores both the main actor query key and the telemetry actor query key to prevent infinite loops",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Return an object from the useActor hook with exactly three properties: actor (from actorQuery), telemetryActor (from telemetryActorQuery), and isFetching (combined fetching state from both queries)",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Run the terminal command 'dfx generate telemetry' (or platform equivalent) to generate TypeScript declarations for the telemetry canister",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Verify the actual folder structure for generated declarations and correct the import path in frontend/src/hooks/useActor.ts from '../../../declarations/telemetry' to the correct relative path (likely '../../declarations/telemetry' if declarations are inside src)",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Trigger a rebuild after declarations are generated and import paths are verified",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    }
  ],
  "projectName": "The Gang",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}