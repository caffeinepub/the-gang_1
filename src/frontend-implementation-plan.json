{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix telemetry actor initialization in useActor hook",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add telemetry actor initialization useEffect hook in useActor.ts",
      "acceptanceCriteria": [
        "The telemetry actor is successfully initialized using dynamic import of ../../../declarations/telemetry",
        "The actor uses process.env.CANISTER_ID_TELEMETRY with telemetryModule.canisterId as fallback",
        "Identity-based agentOptions are passed when identity exists",
        "setTelemetryActor is called with the created actor instance",
        "Errors are caught and logged with console.warn('Telemetry offline:', e)",
        "The useEffect depends on [actorQuery.data, identity]",
        "The new useEffect is positioned above the existing invalidateQueries useEffect",
        "The telemetryActor state is no longer null after initialization"
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useActor.ts",
          "operation": "modify",
          "description": "Insert a new useEffect hook to initialize the telemetry actor connection. The hook must: (1) dynamically import ../../../declarations/telemetry, (2) create the telemetry actor using process.env.CANISTER_ID_TELEMETRY or telemetryModule.canisterId as fallback, (3) pass identity-based agentOptions when identity exists (similar to how the main actor is configured), (4) call setTelemetryActor with the created actor instance, (5) handle errors with console.warn('Telemetry offline:', e), (6) depend on [actorQuery.data, identity], and (7) be positioned immediately above the existing useEffect that contains invalidateQueries logic. Do not modify the main actorQuery logic or the invalidateQueries useEffect."
        }
      ]
    }
  ]
}