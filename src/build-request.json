{
  "kind": "build_request",
  "title": "Replace useActor.ts with dual-actor setup for telemetry",
  "projectName": "The Gang",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-21",
      "text": "Replace the entire contents of frontend/src/hooks/useActor.ts with the user-provided template that implements dual-actor initialization: main orchestrator actor (Golden Master) and telemetry side master actor with defensive loading",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-template"
        ],
        "quotes": [
          "This is what I'm expecting the frontend/src/hooks/useActor.ts file to look like when you are done."
        ]
      },
      "acceptanceCriteria": [
        "The file frontend/src/hooks/useActor.ts matches the user-provided template exactly",
        "The file imports createTelemetryActor from '../../../declarations/telemetry'",
        "The useActor hook initializes both the main actor (actorQuery) and telemetry actor (telemetryActorQuery) using separate React Query queries",
        "The telemetry actor query checks for CANISTER_ID_TELEMETRY or VITE_TELEMETRY_CANISTER_ID environment variables",
        "The telemetry actor query includes defensive error handling with console.warn and console.error",
        "The telemetry actor query returns null if canister ID is missing or initialization fails",
        "The useEffect hook invalidates and refetches dependent queries when actorQuery.data changes, excluding ACTOR_QUERY_KEY and TELEMETRY_QUERY_KEY",
        "The hook returns an object with actor, telemetryActor, and isFetching properties"
      ]
    }
  ],
  "constraints": [
    "Do not modify any other files besides frontend/src/hooks/useActor.ts",
    "The file must match the user-provided template exactly with no variations",
    "Do not change the implementation logic, imports, or structure from the template"
  ],
  "nonGoals": [
    "Creating or modifying the telemetry canister backend code",
    "Adding telemetry functionality to other components",
    "Modifying the main actor initialization logic beyond what's in the template",
    "Adding additional environment variable handling"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}